from machine import Pin, I2C
from ssd1306 import SSD1306_I2C
import framebuf
import time

WIDTH, HEIGHT = 128, 64 # Display dimensions

i2c = I2C(0, scl=Pin(1), sda=Pin(0), freq=200000) # I2C on pins 0 and 1
oled = SSD1306_I2C(WIDTH, HEIGHT, i2c) # Display object

# Bytearray images in hex
clock = bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfc\x00\x00\x1f\x80\x00\xfc\x00\x00\x1f\x80\x03\x02\x00\x00\x60\x40\x04\x04\x00\x00\x10\x30\x04\x08\x00\x00\x10\x30\x18\x10\x0f\xf8\x08\x08\x18\x20\xf0\x07\x04\x08\x18\x41\x00\x00\x82\x08\x18\x82\x00\x00\x61\x08\x19\x0c\x00\x00\x10\x88\x1a\x0c\x00\x00\x10\x48\x04\x10\x00\x00\x0c\x30\x00\x60\x00\x00\x02\x00\x00\x60\x00\x00\x02\x00\x00\x80\x00\x00\x01\x00\x00\x80\x01\x00\x01\x00\x00\x80\x01\x00\x01\x00\x00\x80\x01\x00\x00\x80\x03\x00\x01\x00\x00\x40\x03\x00\x01\x00\x00\x40\x03\x00\x01\x00\x00\x40\x03\x00\x01\x00\x00\x40\x03\x00\x01\x00\x00\x40\x03\x00\x01\xfc\x00\x40\x03\x00\x00\x00\x00\x40\x03\x00\x00\x00\x00\x40\x03\x00\x00\x00\x00\x40\x00\x80\x00\x00\x00\x80\x00\x80\x00\x00\x00\x80\x00\x80\x00\x00\x00\x80\x00\x80\x00\x00\x00\x80\x00\x80\x00\x00\x01\x00\x00\x60\x00\x00\x02\x00\x00\x10\x00\x00\x0c\x00\x00\x10\x00\x00\x0c\x00\x00\x0c\x00\x00\x10\x00\x00\x1e\x00\x00\x7c\x00\x00\x1e\x00\x00\x7c\x00\x00\x7d\xf0\x07\x9e\x00\x00\xf0\x0f\xf8\x0f\x80\x00\xf0\x0f\xf8\x0f\x80\x00\x60\x00\x00\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00')
settings = bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xf0\x00\x00\x00\x00\x10\x08\x00\x00\x00\x18\x20\x04\x00\x00\x00\x24\x20\x04\x00\x00\x00\x42\x20\x04\x00\x00\x00\x81\x20\x04\x1e\x00\x01\x00\xa0\x04\x21\x00\x02\x00\x40\x02\x40\x80\x04\x00\x00\x01\x80\x40\x04\x00\x00\x00\x00\x20\x04\x00\x00\x00\x00\x20\x02\x00\x00\x00\x00\x20\x01\x00\x00\x00\x00\x40\x00\x80\x00\x00\x00\x80\x00\x80\x07\xe0\x00\x80\x00\x80\x18\x18\x01\x00\x00\x80\x20\x04\x01\x00\x00\x80\x40\x02\x00\x80\x1f\x00\x80\x01\x00\x78\x20\x01\x00\x00\x80\x04\x40\x01\x00\x00\x80\x02\x40\x02\x00\x00\x40\x02\x40\x02\x00\x00\x40\x02\x40\x02\x00\x00\x40\x02\x40\x02\x00\x00\x40\x02\x40\x02\x00\x00\x40\x02\x40\x02\x00\x00\x40\x02\x40\x01\x00\x00\x80\x02\x20\x01\x00\x00\x80\x04\x1f\x00\x80\x01\x00\x78\x00\x80\x40\x02\x00\x80\x00\x80\x20\x04\x00\x80\x00\x40\x18\x18\x00\x60\x00\x80\x07\xe0\x00\x10\x01\x00\x00\x00\x00\x08\x02\x00\x00\x00\x00\x04\x02\x00\x00\x00\x00\x04\x02\x00\x00\x00\x40\x08\x02\x01\x80\x01\xa0\x10\x01\x02\x40\x02\x18\x20\x00\x84\x20\x04\x06\x40\x00\x78\x20\x04\x01\x80\x00\x00\x20\x04\x00\x00\x00\x00\x20\x04\x00\x00\x00\x00\x10\x08\x00\x00\x00\x00\x0f\xf0\x00\x00\x00\x00\x00\x00\x00\x00')

# Frame buffers (bytearray image, size_x, size_y, monochrome (black and white) image)
fb = framebuf.FrameBuffer(clock, 48,48, framebuf.MONO_HLSB)
fb2 = framebuf.FrameBuffer(settings, 48,48, framebuf.MONO_HLSB)

oled.fill(0) # Fill display with nothing (1 is turn on all pixels). Reseting display

while True:
    oled.fill(0)
    msg = "Hello, world!"
    oled.text(msg, 0,0) # Load text to the display memory
    oled.show() # Show everything from the display memory
    
    time.sleep(1)
    
    oled.fill(0)
    oled.blit(fb, 0,0) # Load framebuff to the display memory (framebuff image, pos_x,pos_y)
    oled.show()
    
    time.sleep(1)
    
    oled.fill(0)
    oled.blit(fb2, 0,0) # Load framebuff to the display memory (framebuff image, pos_x,pos_y)
    oled.show()
    
    time.sleep(1)
